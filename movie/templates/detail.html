{% extends 'base.html' %}
{% block content %}
<div class="card mb-3">
    <div class="row g-0">
        <div class="col-md-4">
            <img src="{{ movie.image.url }}" class="img-fluid rounded-start" alt="...">
        </div>
        <div class="col-md-8">
            <div class="card-body">
                <h5 class="card-title">{{ movie.title }}</h5>
                <p class="card-text">{{ movie.description }}</p>
                <p class="card-text"><small class="text-muted">{{ movie.year }}</small></p>
                <p class="card-text"><strong>Director:</strong> {{ movie.director }}</p>
                <p class="card-text"><strong>Actors:</strong> {{ movie.actors }}</p>
            </div>
        </div>
    </div>
</div>

<h2>Reviews</h2>
<hr />
{% if user.is_authenticated %}
<form action="{% url 'createreview' movie.id %}" method="POST">
    {% csrf_token %}
    <div class="mb-3">
        {{ form.as_p }}
    </div>
    <button type="submit" class="btn btn-primary">Add Review</button>
</form>
{% else %}
<a href="{% url 'loginaccount' %}">Log in to write a review</a>
{% endif %}
<hr />
{% for review in reviews %}
<div class="card mb-2">
    <div class="card-body">
        <h6 class="card-subtitle mb-2 text-muted">{{ review.user.username }}</h6>
        <p class="card-text">{{ review.text }}</p>
    </div>
</div>
{% endfor %}
{% endblock content %}